/*!

Name: Commitment
Dependencies: jQuery
Author: Michael Lynch
Author URL: http://michaelynch.com
Date Created: February 7, 2014
Last Updated: February 7, 2014
Licensed under the MIT license

*/
;(function(a){a.fn.commitment=function(b){if(!this.length){return this}var g={user:null,repo:null,filterBranch:null,filterAuthor:null,filterPath:null,filterSince:null,filterUntil:null,makeCommitLink:false,showCommitDate:true,dateFormat:null,showCommitter:true,showCommitterAvatar:true,error:function(i){},success:function(){}};var f=this;f.settings={};f.settings=a.extend({},g,b);var e=f.settings;var d=a(this);if(e.user&&e.repo){var c="https://api.github.com/repos/"+e.user+"/"+e.repo+"/commits";var h=[];if(e.filterBranch){h.push("sha="+e.filterBranch)}if(e.filterAuthor){h.push("author="+e.filterAuthor)}if(e.filterPath){h.push("path="+e.filterPath)}if(e.filterSince){h.push("since="+e.filterSince)}if(e.filterUntil){h.push("until="+e.filterUntil)}h="?"+h.join("&");if(h.length>1){c+=h}d.each(function(){a.ajax({type:"GET",url:c,dataType:"json",success:function(n){for(var l=0;l<n.length;l++){var p="<li>";if(e.makeCommitLink&&n[l].html_url){p+='<a href="'+n[l].html_url+'" target="_blank" class="message">'+n[l].commit.message+"</a>"}else{p+='<div class="message">'+n[l].commit.message+"</div>"}if(e.showCommitDate&&n[l].commit.committer.date){var k=new Date(n[l].commit.committer.date);var j=k.getDate();var o=k.getMonth();var m=k.getFullYear();if(e.dateFormat==="dd/mm/yyyy"){k=j+"/"+o+"/"+m}else{k=k.toDateString()}p+='<div class="date">'+k+"</div>"}if(e.showCommitter&&n[l].committer.login){p+=' <div class="committer">';if(e.showCommitterAvatar&&n[l].committer.avatar_url){p+='<img src="'+n[l].committer.avatar_url+'" alt="Github Avatar" class="avatar" />'}p+='<div class="user">By <a href="'+n[l].committer.url+'" target="_blank">'+n[l].committer.login+"</a></div></div>"}p+="</li>";d.append(p)}e.success.call(this)},error:function(i,k,j){e.error.call(this,"Status: "+i.status+" Error: "+j)}})})}else{e.error.call(this,"A Github username and repository are required.")}}})(jQuery);